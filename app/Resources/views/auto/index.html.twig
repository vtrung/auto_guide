{% extends 'base.html.twig' %}


{% block body %}

    {%  include 'partials/navbar.html' %}

    <main role="main">
        {%  include 'partials/header.html' %}
        {#<div class="container">Dumping: {{ dump() }}</div>#}

        <div class="container">
            {#<div class="row">#}
            {#<ul>#}
            {#{% for car in cars %}#}
            {#<li>{{ car.year}} {{ car.make }} {{car.model}}: {{ car.mpg }} mpg</li>#}
            {#{% endfor %}#}
            {#</ul>#}
            {#</div>#}
            <div class="row">
                <div class="col-sm-6">
                    {{ form_start(form, {'attr': {'id': 'car_form'}}) }}
                    {{ form_errors(form) }}
                    <div class="form-group">
                        {{ form_label(form.year, 'Year: ') }}
                        {{ form_errors(form.year) }}
                        {{ form_widget(form.year) }}
                    </div>

                    <div class="form-group">
                        {{ form_label(form.make, 'Make: ') }}
                        {{ form_errors(form.make) }}
                        {{ form_widget(form.make) }}
                    </div>

                    <div class="form-group">
                        {{ form_label(form.model, 'Model: ') }}
                        {{ form_errors(form.model) }}
                        {{ form_widget(form.model) }}
                    </div>

                    {{ form_end(form) }}
                </div>
                <div class="col-sm-6">
                    {% if(car) %}
                    <p>
                        {{ car.year}} {{ car.make }} {{car.model}}: {{ car.mpg }} mpg
                    </p>
                    {% endif %}
                </div>


            </div>

        </div>
    </main>


{% endblock %}

{% block title %}
    {{ title }}
{% endblock %}

{% block javascripts %}
    <script>
        $( "#form_year" ).change(function() {
            document.getElementById('form_make').selectedIndex = -1;
            document.getElementById('form_model').selectedIndex = -1;
            $('#car_form').submit();
        });

        $( "#form_make" ).change(function() {
            document.getElementById('form_model').selectedIndex = -1;
            $('#car_form').submit();
        });

        $( "#form_model" ).change(function() {
            $('#car_form').submit();
        });

    </script>
{% endblock %}